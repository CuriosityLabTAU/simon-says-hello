{
  "sequence": [
    "opening",
    "play",
    "end"
  ],
  "opening": {
    "start": "game:start",
    "transitions": [
      "game:start:child_kinect:start:1",
      "child_kinect:started:robot:start_pose_detection:1",
      "robot:start_pose_detection:child_kinect:wait_for_start_pose:1",
      "child_kinect:start_pose_detected:robot:introduction:1",
      "robot:introduction:child_kinect:wait_for_yes_pose:1",
      "child_kinect:yes_pose_detected:interaction:end:1"
    ]
  },
  "tutorial": {
    "start": "robot:start_tutorial",
    "internal_clock": [
      "how_long:20"
    ],
    "transitions": [
      "robot:start_tutorial:game:generate_selection:1:done",
      "game:generate_selection:tablet:selection_screen:1:x",
      "tablet:selection_screen:robot:selection_tutorial:1:x",
      "tablet:selection_screen:tablet:disable_tablet:1",
      "robot:selection_tutorial:robot:select_treasure:1",
      "robot:select_treasure:tablet:select_treasure:1:x:done",
      "child:press_treasure:game:tangram_selected:1:x",
      "game:tangram_selected:tablet:tangram_screen:1:x",
      "tablet:tangram_screen:hourglass:start:1",
      "hourglass:update:tablet:hourglass_update:1:x",
      "hourglass:finish:game:finish:1",
      "hourglass:finish:hourglass:stop:1",
      "tablet:tangram_screen:robot:tangram_tutorial:1:x",
      "robot:tangram_tutorial:robot:select_move:1:x",
      "robot:select_move:robot:explain_move:1:x",
      "robot:explain_move:tablet:change_pieces:1:x:done",
      "child:tangram_change:game:tangram_changed:1:x:done",
      "game:not_solved:tablet:not_solved:1:x",
      "tablet:not_solved:robot:select_move:1:x",
      "game:solved:tablet:solved:1:x",
      "game:solved:hourglass:stop:1",
      "tablet:solved:robot:robot_win:1",
      "tablet:solved:tablet:idle:1",
      "game:finish:tablet:finish:1:x",
      "tablet:finish:robot:robot_lose:1",
      "robot:robot_win:interaction:end:1:done",
      "robot:robot_lose:interaction:end:1:done"
    ]
  },
  "play": {
    "start": "game:start_game",
    "transitions": [
      "game:start_game:robot:act:1",
      "robot:act:game:wait:1",
      "game:wait:child_kinect:wait:1",
      "robot:finished_action:game:request_pose:1",
      "game:request_pose:child_kinect:wait_for_current_pose",
      "child_kinect:received_pose:game:judge_pose:1:x",
      "game:verdict:robot:respond:1:x:done"
    ]
  },
  "end": {
    "start": "robot:start_play",
    "hourglass" : ["max_counter:45"],
    "transitions": [
      "robot:start_play:game:generate_selection:1:done",
      "game:generate_selection:tablet:selection_screen:1:x",
      "tablet:selection_screen:robot:my_turn:1:x",
      "tablet:selection_screen:tablet:disable_tablet:1",
      "robot:my_turn:robot:select_treasure:1",
      "robot:select_treasure:tablet:select_treasure:1:x:done",
      "child:press_treasure:game:tangram_selected:1:x",
      "game:tangram_selected:tablet:tangram_screen:1:x",
      "tablet:tangram_screen:hourglass:start:1",
      "hourglass:update:tablet:hourglass_update:1:x",
      "hourglass:finish:game:finish:1",
      "hourglass:finish:hourglass:stop:1",
      "tablet:tangram_screen:robot:select_move:1:x",
      "robot:select_move:robot:explain_move:1:x",
      "robot:explain_move:tablet:change_pieces:1:x:done",
      "child:tangram_change:game:tangram_changed:1:x",
      "game:not_solved:tablet:not_solved:1:x",
      "tablet:not_solved:robot:select_move:1:x:done",
      "game:solved:tablet:solved:1:x",
      "game:solved:hourglass:stop:1",
      "tablet:solved:robot:robot_win:1",
      "tablet:solved:tablet:disable_tablet:1",
      "game:finish:tablet:finish:1:x",
      "tablet:finish:robot:robot_lose:1",
      "robot:robot_win:interaction:end:1:done",
      "robot:robot_lose:interaction:end:1:done"
    ]
  }
}